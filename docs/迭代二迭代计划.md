# 迭代二迭代计划
 - 实现kube-proxy来支持service(lab guide 2), service支持两种类型: ClusterIP和NodePort
 - 实现DNS(lab guide 5, 由于service的clusterIp动态分配的, 只实现service不方便测试两个pod的通信)
 - 实现controller来实现动态扩容和Replicaset
 - kube-proxy支持ReplicaSet的负载均衡(ngnix)
 - 实现scheduler, 将pod分配到node

## 修改历史
 - 和敬凯 2022.4.26

## yaml template
- 为Pod的定义中增加`label`字段
- [service clusterIP模式yaml模板](./yaml_template/service_clusterIP.template.yaml)
- [service NodePort模式yaml模板](./yaml_template/service_nodeport.template.yaml)
- [DNS配置yaml模板](./yaml_template/dns.template.yaml)

## 系统架构
### Q: Pod1如何访问Pod2
 - Pod1访问Pod2的方式: `example.com/service-1`
   - 首先, Pod1向DNS查询`example.com`的IP地址, DNS部署在master节点, 可以使用物理IP访问, 访问DNS不需要经过kube-proxy, 
   DNS访问`example.com`对应的gateway地址
   - gateway部署在master或某个节点处, 使用物理IP访问, 访问gateway也不需要经过kube-proxy, Pod1发起`http://gatewayIP/service-1`,
   由gateway重定向到service-1对应的clusterIP
 - gateway将请求重定向为`http://clusterIP:port`, kube-proxy根据service配置和负载均衡策略将其重定向为`http://podIP:port`
 - 
## 任务
 - 解析yaml
 - kube-proxy(基本拦截和转发功能)
 - DNS
 - gateway
 - controller实现Replicaset和动态扩容, scheduler
 - kube-proxy负载均衡
 - 

## 参考资料
